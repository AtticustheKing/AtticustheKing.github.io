<html>
<head>
<title>Axe Knight</title>
</head>
 <body>
 <a href="./index.html">Homepage</a>
 <br>
<canvas id="canvas" style="background:#fffff"></canvas> 
  
<script>
 
 //SET UP
 var axe_image = new Image();
 axe_image.src = 'axe.png'
 var death_image = new Image();
 death_image.src = 'https://static-cdn.jtvnw.net/jtv_user_pictures/e91a3dcf-c15a-441a-b369-996922364cdc-profile_image-300x300.png'
 var pause = false;
 var  controller;
 var canvas = document.getElementById('canvas')
 var c = canvas.getContext('2d');
 var innerWidth = 1420;
 var innerHeight = 775; 
 canvas.width = innerWidth;
 canvas.height = innerHeight;
 
 

  
 
 //AVATARS SET UP


//ENEMY
 
 var enemy_height = 50;
 var enemy_width = 50;
 var enemy_image = new Image();
 enemy_image.src = 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/Solid_blue.svg/225px-Solid_blue.svg.png';
  
 var enemy = {
   face: 'right',  
   gravity: true,
   x: 25,
   y: 775 - 20 - 50,
   damage: 10,
   health: 100,
   x_velocity: 0,
   y_velocity: 0,
   height: enemy_height,
   width: enemy_width,
   draw: function() {
   c.drawImage(enemy_image, this.x, this.y, this.width, this.height);
  }}
 
  //PLAYER
 
 
 
 var player_height = 595;
 var player_width = 879;
 var player_image = new Image();
 player_image.src = 'axe_Knight.png';
 
  var player = {
   frame: 1,
   imunityLength: 100,
   imunity: false,
   gravity: true,
   face: 'right',
   dash: false,
   damage: 10,
   sx: 0,
   sy: 0,
   sWidth: 105,
   sHeight: 276,
  health: 100,
  jumping: false,
  x_velocity: 0,
  y_velocity: 0, 
  height: 176,
  width: 105,
  x: innerWidth/2 - player_width/2,
  x_end: this.x + 100,
  y: innerHeight - (player_height + 100),
 };
 
 
 function drawPlayer() {
  c.drawImage(player_image, player.sx, player.sy, player.sWidth, player.sHeight, player.x, player.y, player.sWidth, player.sHeight); 
 }
 
 
 //AXE
 
 var rightAxe = {
 frame: 0, 
 sx: 0,
 sy: 0,
 sWidth: 0,
 sHeight: 0, 
 x: 500,
 y: 500,
 width: 1609,
 height: 335,
 }
 
 function drawRightAxe() { 
  c.drawImage(axe_image, rightAxe.sx, rightAxe.sy, rightAxe.sWidth, rightAxe.sHeight, rightAxe.x, rightAxe.y, rightAxe.width, rightAxe.height)
 }
 
 //CONTROLLER
controller = {
 up: false,
 left: false,
 right: false, 
 attack: false,
 dash: false,
 heal: false,
 keyListener: function(event) {
  
  var key_state = (event.type == 'keydown')?true:false;
 
  switch(event.keyCode) {
    case 84: controller.T = key_state;
    break;
    case 89: controller.Y = key_state;
    break;
   case 37: controller.left = key_state;
    break;
   case 39: controller.right = key_state;
    break;
   case 90: controller.up = key_state;
    break; 
   case 88: controller.attack = key_state;
    break;
   case 67: controller.dash = key_state;
    break;
   case 65: controller.heal = key_state;
    break;
   case 69: controller.esc = key_state; 
  } 
  }  
  }
 
 //PLAYER ANIMATION

 function animation() {
  
   //DIFFERENT SCREENS
  
  
  
  if (player.x >= 1300) {
  player.x = 1295
  }
   
   if (player.x <= 20) {
    player.x = 25
   }
  
  if (player.jumping === false && controller.up) {
   player.y_velocity -= 80;
   player.jumping = true; 
  }
  
  
//MOVEMENT GOES HERE 
  
  if (controller.right === false && controller.left === false) {
   if (player.face === 'right'){
    player.frame = 1
   } if (player.face === 'left'){
    player.frame = 6
   }
  }
  
 
 
 
 
player.y_velocity += 5;
player.x += player.x_velocity;
player.y += player.y_velocity; 

  if (player.gravity === true) {
  player.x_velocity *= 0.9;
player.y_velocity *= 0.9;
  }
  
if (player.y > 775 - 20 - player.sHeight) {
  player.jumping = false;
  player.y = 775 - 20 - player.sHeight; 
  player.y_velocity = 0; 
}

  
  //ENEMY ANIMATION
  
  
  if(player.x > enemy.x){
   enemy.x_velocity += 0.8;
   enemy.face = 'right';
  }
  if (player.x < enemy.x){
   enemy.x_velocity -= 0.8;
   enemy.face = 'left';
  }
  if (player.x === enemy.x){
   enemy.x_velocity = 0
  }
  
  if (enemy.x >= 1300) {
   enemy.x_velocity = 0;
   enemy.x -= 2; 
  }
  
   if (enemy.x <= 20) {
   enemy.x_velocity = 0;
   enemy.x += 2; 
  }
  
  if (enemy.y < 775 - 20 - 50) {
   enemy.y_velocity = 0;
  }
  
   if (enemy.gravity === true) {
  enemy.x_velocity *= 0.9;
enemy.y_velocity *= 0.9;
  }
  
enemy.x += enemy.x_velocity;
   
   
   //HEATH, MONEY, AND ALL ONSCREEN TEXT
    
   function drawHealth() {
    c.font = "18px Arial"
    c.fillStyle = "#00000"
    c.fillText("Health: " + player.health, 25, 25)
   }
   
  
   //ATTACK ANIMATION
   
  
  //COLLISION DETECTION
  
  if (player.x < enemy.x + enemy.width &&
   player.x + player.sWidth > enemy.x &&
   player.y < enemy.y + enemy.height &&
   player.y + player.sHeight > enemy.y) {
    
   if (enemy.face === 'right'){
   enemy.x_velocity -= 40;
   enemy.y_velocity -= 40;
    if (controller.left === true){
     player.x_velocity += 30;
     player.y_velocity -= 30;
    } if (controller.left === false) {
   player.x_velocity += 20;
   player.y_velocity -= 20;}
   if (player.imunity === false){
    player.health -= enemy.damage;
    player.imunity = true;
    setTimeout(playerImunity, player.imunityLength)
    function playerImunity() {
    player.imunity = false;
    }
   }
   }
   
   if (enemy.face === 'left'){
   enemy.x_velocity += 40;
   enemy.y_velocity -= 40;
    if (controller.right === true) {
     player.x_velocity -= 30;
     player.y_velocity -= 30;
    } if (controller.right === false) {
   player.x_velocity -= 20;
   player.y_velocity -= 20;
    }
   if (player.imunity === false){
    player.health -= enemy.damage;
    player.imunity = true;
    setTimeout(playerImunity, player.imunityLength)
    function playerImunity() {
    player.imunity = false;
    }
   }
   }
   
}
  
   
   if (player.health === 0) {

    setTimeout(function() {location.reload()}, 100)
 c.drawImage(death_image, 0,0, innerWidth, innerHeight)
   }
   
  
  

  
 c.clearRect(0,0, canvas.width, canvas.height);
   
 if (rightAxe.frame === 0) {
rightAxe.sx = 0
rightAxe.sy = 0
rightAxe.sWidth = 0
rightaxe.sHeight = 0 
 }
 if (rightAxe.frame === 1) {
rightAxe.sx = 0
rightAxe.sy = 0
rightAxe.sWidth =230
right axe.sHeight = 197
 }
 if (rightAxe.frame === 2) {
rightAxe.sx = 245 
rightAxe.sy = 45
rightAxe.sWidth = 252 
right axe.sHeight = 160
 }
 if (rightAxe.frame === 3) {
rightAxe.sx = 508
rightAxe.sy = 95
rightAxe.sWidth = 262
right axe.sHeight = 105
 }
 if (rightAxe.frame === 4) {
rightAxe.sx = 
rightAxe.sy =
rightAxe.sWidth =
right axe.sHeight = 
 }
 if (rightAxe.frame === 5) {
rightAxe.sx = 
rightAxe.sy =
rightAxe.sWidth =
right axe.sHeight = 
 }
 if (rightAxe.frame === 6) {
rightAxe.sx = 
rightAxe.sy =
rightAxe.sWidth =
right axe.sHeight = 
 }
  
  if (player.frame === 1){  
player.sx = 0
player.sy = 0
player.sWidth = 107
player.sHeight = 276 
 }
 if (player.frame === 2){ 
  player.sx = 104
player.sy = 0
  player.sWidth = 152
player.sHeight =  276
 }
  if (player.frame === 3){  
  player.sx = 250
player.sy = 0 
  player.sWidth = 169
player.sHeight = 276 
 }
   if (player.frame === 4){ 
player.sx = 416
player.sy = 0
   player.sWidth = 151
player.sHeight = 276 
 }
   if (player.frame === 5){    
player.sx = 566
player.sy = 0
  player.sWidth = 151
player.sHeight = 276 
 }
  
  if (player.frame === 6){ 
  player.sx = 593
player.sy = 281
player.sWidth = 126
player.sHeight = 280 
 }
  
    if (player.frame === 10){ 
 player.sx = 0
player.sy = 284
  player.sWidth = 142
player.sHeight = 280
 }
     if (player.frame === 9){ 
   player.sx = 144
player.sy = 281
   player.sWidth = 152
player.sHeight = 280
 }
      if (player.frame === 8){
  player.sx = 295
player.sy = 281
  player.sWidth = 156
player.sHeight = 280 
 }
       if (player.frame === 7){ 
  player.sx = 448
player.sy = 281
  player.sWidth = 147
player.sHeight = 280
 }
  
  if (player.frame === 11){ 
  player.sx = 725
player.sy = 0
player.sWidth = 150
player.sHeight = 276 
 }
  
  if (player.frame === 12){ 
  player.sx = 882
player.sy = 0
player.sWidth = 106
player.sHeight = 276 
 }
  
  if (player.frame === 13){ 
  player.sx = 735
player.sy = 281
player.sWidth = 106
player.sHeight = 276 
 }
  
  if (player.frame === 14){ 
  player.sx = 847
player.sy = 281
player.sWidth = 150
player.sHeight = 276 
 }
  
  
  
  
 drawPlayer();
 drawRightAxe(); 
 enemy.draw();
 drawHealth();  
   
  
  if (controller.Y === true && controller.T === true) {
   controller.Y = false;
   controller.T = false;
   var playerInput = prompt("Enter Text Here:")  
   }
  
  if (playerInput === "health"){
   player.health += 1000;
  }
  
 }
 
 //PLAYER RUNNING ANIMATION
 
 function playerMovement() {
    
  
  if (player.jumping === true) {
    if (controller.right === false && controller.left === false)
    {
     if (player.face === 'right'){
 
      player.frame = 1
    } if (player.face === 'left'){
     player.frame = 6
    
    }
    }else{
   if (player.face === 'right'){
     player.frame = 4
   
    } if (player.face === 'left'){
     player.frame = 9
    }
    }
  }
 
   if (controller.left) {
 if (player.x <= 20) {
 player.x_velocity = 0;
  player.face = 'left';
 } else {
   player.x_velocity -= 5.4; 
  player.face = 'left'
 if (player.frame <= 6 || player.frame >= 10) {
  player.frame = 7
  }
player.frame++
 }
 }
 
 if (controller.right) {
  if (player.x >= 1300) {
   player.x_velocity = 0;
   player.face = 'right';
  } else {
  player.x_velocity += 5.4;
player.face = 'right';
  if (player.frame >= 5){
    player.frame = 2
  }
   player.frame++
   
}
   }}
 
 
function attackAnimation() {
if (controller.attack){
rightAxe.frame = 1
rightAxe.frame++
 if (rightAxe.frame >= 3){
 controller.attack = false;
 }
} 
 }
 
 setInterval(attackAnimation, 30)
 setInterval(animation, 30)
 setInterval(playerMovement, 150)

 
  window.addEventListener('keydown', controller.keyListener);
  window.addEventListener('keyup', controller.keyListener);  
  
  
  </script>
  
  </body>
  
